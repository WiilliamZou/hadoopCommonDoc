<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 19:05:54 EDT 2015 -->
<title>ZKFailoverController</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ZKFailoverController";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ZKFailoverController.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/ha/TestZKFailoverControllerStress.RandomlyThrow.html" title="class in org.apache.hadoop.ha"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/ha/ZKFailoverController.html" target="_top">Frames</a></li>
<li><a href="ZKFailoverController.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.ha</div>
<h2 title="Class ZKFailoverController" class="title">Class ZKFailoverController</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.ha.ZKFailoverController</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../org/apache/hadoop/ha/MiniZKFCCluster.DummyZKFC.html" title="class in org.apache.hadoop.ha">MiniZKFCCluster.DummyZKFC</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.LimitedPrivate(value="HDFS")
public abstract class <span class="strong">ZKFailoverController</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ActiveAttemptRecord</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ElectorCallbacks.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ElectorCallbacks</a></strong></code>
<div class="block">Callbacks from elector</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.HealthCallbacks.html" title="class in org.apache.hadoop.ha">ZKFailoverController.HealthCallbacks</a></strong></code>
<div class="block">Callbacks from HealthMonitor</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ServiceStateCallBacks.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ServiceStateCallBacks</a></strong></code>
<div class="block">Callbacks for HAServiceStatus</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#activeAttemptRecordLock">activeAttemptRecordLock</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../org/apache/hadoop/conf/Configuration.html" title="class in org.apache.hadoop.conf">Configuration</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#conf">conf</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#delayExecutor">delayExecutor</a></strong></code>
<div class="block">Executor on which <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#scheduleRecheck(long)"><code>scheduleRecheck(long)</code></a> schedules events</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#delayJoiningUntilNanotime">delayJoiningUntilNanotime</a></strong></code>
<div class="block">A future nanotime before which the ZKFC will not join the election.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#elector">elector</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ERR_CODE_AUTO_FAILOVER_NOT_ENABLED">ERR_CODE_AUTO_FAILOVER_NOT_ENABLED</a></strong></code>
<div class="block">Automatic failover is not enabled</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ERR_CODE_FORMAT_DENIED">ERR_CODE_FORMAT_DENIED</a></strong></code>
<div class="block">Unable to format the parent znode in ZK</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ERR_CODE_NO_FENCER">ERR_CODE_NO_FENCER</a></strong></code>
<div class="block">Fencing is not properly configured</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ERR_CODE_NO_PARENT_ZNODE">ERR_CODE_NO_PARENT_ZNODE</a></strong></code>
<div class="block">The parent znode doesn't exist in ZK</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ERR_CODE_NO_ZK">ERR_CODE_NO_ZK</a></strong></code>
<div class="block">Cannot connect to ZooKeeper</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#fatalError">fatalError</a></strong></code>
<div class="block">Set if a fatal error occurs</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/HealthMonitor.html" title="class in org.apache.hadoop.ha">HealthMonitor</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#healthMonitor">healthMonitor</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ActiveAttemptRecord</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#lastActiveAttemptRecord">lastActiveAttemptRecord</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/HealthMonitor.State.html" title="enum in org.apache.hadoop.ha">HealthMonitor.State</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#lastHealthState">lastHealthState</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#localTarget">localTarget</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#quitElectionOnBadState">quitElectionOnBadState</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../org/apache/hadoop/ha/ZKFCRpcServer.html" title="class in org.apache.hadoop.ha">ZKFCRpcServer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#rpcServer">rpcServer</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.HAServiceState.html" title="enum in org.apache.hadoop.ha">HAServiceProtocol.HAServiceState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#serviceState">serviceState</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#serviceStateMismatchCount">serviceStateMismatchCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#USAGE">USAGE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_ACL_DEFAULT">ZK_ACL_DEFAULT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_ACL_KEY">ZK_ACL_KEY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_AUTH_KEY">ZK_AUTH_KEY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_PARENT_ZNODE_DEFAULT">ZK_PARENT_ZNODE_DEFAULT</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_PARENT_ZNODE_KEY">ZK_PARENT_ZNODE_KEY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_QUORUM_KEY">ZK_QUORUM_KEY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_SESSION_TIMEOUT_DEFAULT">ZK_SESSION_TIMEOUT_DEFAULT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZK_SESSION_TIMEOUT_KEY">ZK_SESSION_TIMEOUT_KEY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZKFC_CONF_KEYS">ZKFC_CONF_KEYS</a></strong></code>
<div class="block">All of the conf keys used by the ZKFC.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#zkQuorum">zkQuorum</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#ZKFailoverController(org.apache.hadoop.conf.Configuration,%20org.apache.hadoop.ha.HAServiceTarget)">ZKFailoverController</a></strong>(<a href="../../../../org/apache/hadoop/conf/Configuration.html" title="class in org.apache.hadoop.conf">Configuration</a>&nbsp;conf,
                    <a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;localTarget)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#badArg(java.lang.String)">badArg</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#becomeActive()">becomeActive</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#becomeStandby()">becomeStandby</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#cedeActive(int)">cedeActive</a></strong>(int&nbsp;millisToCede)</code>
<div class="block">Request from graceful failover to cede active role.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#checkEligibleForFailover()">checkEligibleForFailover</a></strong>()</code>
<div class="block">Ensure that the local node is in a healthy state, and thus
 eligible for graceful failover.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#checkRpcAdminAccess()">checkRpcAdminAccess</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#confirmFormat()">confirmFormat</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.StateChangeRequestInfo.html" title="class in org.apache.hadoop.ha">HAServiceProtocol.StateChangeRequestInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#createReqInfo()">createReqInfo</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract <a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#dataToTarget(byte[])">dataToTarget</a></strong>(byte[]&nbsp;data)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#doCedeActive(int)">doCedeActive</a></strong>(int&nbsp;millisToCede)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#doFence(org.apache.hadoop.ha.HAServiceTarget)">doFence</a></strong>(<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;target)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#doGracefulFailover()">doGracefulFailover</a></strong>()</code>
<div class="block">Coordinate a graceful failover.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#doRun(java.lang.String[])">doRun</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#fatalError(java.lang.String)">fatalError</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;err)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#fenceOldActive(byte[])">fenceOldActive</a></strong>(byte[]&nbsp;data)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#formatZK(boolean,%20boolean)">formatZK</a></strong>(boolean&nbsp;force,
        boolean&nbsp;interactive)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getCurrentActive()">getCurrentActive</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getElectorForTests()">getElectorForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../org/apache/hadoop/ha/HealthMonitor.State.html" title="enum in org.apache.hadoop.ha">HealthMonitor.State</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getLastHealthState()">getLastHealthState</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getLocalTarget()">getLocalTarget</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getParentZnode()">getParentZnode</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract <a href="../../../../org/apache/hadoop/security/authorize/PolicyProvider.html" title="class in org.apache.hadoop.security.authorize">PolicyProvider</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getPolicyProvider()">getPolicyProvider</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract <a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getRpcAddressToBindTo()">getRpcAddressToBindTo</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../org/apache/hadoop/ha/ZKFCRpcServer.html" title="class in org.apache.hadoop.ha">ZKFCRpcServer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getRpcServerForTests()">getRpcServerForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getScopeInsideParentNode()">getScopeInsideParentNode</a></strong>()</code>
<div class="block">Return the name of a znode inside the configured parent znode in which
 the ZKFC will do all of its work.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.HAServiceState.html" title="enum in org.apache.hadoop.ha">HAServiceProtocol.HAServiceState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#getServiceState()">getServiceState</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#gracefulFailoverToYou()">gracefulFailoverToYou</a></strong>()</code>
<div class="block">Coordinate a graceful failover to this node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#initHM()">initHM</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#initRPC()">initRPC</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#initZK()">initZK</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#loginAsFCUser()">loginAsFCUser</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#mainLoop()">mainLoop</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#printUsage()">printUsage</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#recheckElectability()">recheckElectability</a></strong>()</code>
<div class="block">Check the current state of the service, and join the election
 if it should be in the election.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#recordActiveAttempt(org.apache.hadoop.ha.ZKFailoverController.ActiveAttemptRecord)">recordActiveAttempt</a></strong>(<a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ActiveAttemptRecord</a>&nbsp;record)</code>
<div class="block">Store the results of the last attempt to become active.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#run(java.lang.String[])">run</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#scheduleRecheck(long)">scheduleRecheck</a></strong>(long&nbsp;whenNanos)</code>
<div class="block">Schedule a call to <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#recheckElectability()"><code>recheckElectability()</code></a> in the future.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#setLastHealthState(org.apache.hadoop.ha.HealthMonitor.State)">setLastHealthState</a></strong>(<a href="../../../../org/apache/hadoop/ha/HealthMonitor.State.html" title="enum in org.apache.hadoop.ha">HealthMonitor.State</a>&nbsp;newState)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#startRPC()">startRPC</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#targetToData(org.apache.hadoop.ha.HAServiceTarget)">targetToData</a></strong>(<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;target)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#verifyChangedServiceState(org.apache.hadoop.ha.HAServiceProtocol.HAServiceState)">verifyChangedServiceState</a></strong>(<a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.HAServiceState.html" title="enum in org.apache.hadoop.ha">HAServiceProtocol.HAServiceState</a>&nbsp;changedState)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ActiveAttemptRecord</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#waitForActiveAttempt(int)">waitForActiveAttempt</a></strong>(int&nbsp;timeoutMillis)</code>
<div class="block">Wait until one of the following events:
 
 Another thread publishes the results of an attempt to become active
 using <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#recordActiveAttempt(org.apache.hadoop.ha.ZKFailoverController.ActiveAttemptRecord)"><code>recordActiveAttempt(ActiveAttemptRecord)</code></a>
 The node enters bad health status
 The specified timeout elapses
 </div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>static final&nbsp;org.apache.commons.logging.Log LOG</pre>
</li>
</ul>
<a name="ZK_QUORUM_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_QUORUM_KEY</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ZK_QUORUM_KEY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_QUORUM_KEY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZK_SESSION_TIMEOUT_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_SESSION_TIMEOUT_KEY</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ZK_SESSION_TIMEOUT_KEY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_SESSION_TIMEOUT_KEY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZK_SESSION_TIMEOUT_DEFAULT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_SESSION_TIMEOUT_DEFAULT</h4>
<pre>private static final&nbsp;int ZK_SESSION_TIMEOUT_DEFAULT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_SESSION_TIMEOUT_DEFAULT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZK_PARENT_ZNODE_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_PARENT_ZNODE_KEY</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ZK_PARENT_ZNODE_KEY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_PARENT_ZNODE_KEY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZK_ACL_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_ACL_KEY</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ZK_ACL_KEY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_ACL_KEY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZK_ACL_DEFAULT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_ACL_DEFAULT</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ZK_ACL_DEFAULT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_ACL_DEFAULT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZK_AUTH_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_AUTH_KEY</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ZK_AUTH_KEY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_AUTH_KEY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZK_PARENT_ZNODE_DEFAULT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZK_PARENT_ZNODE_DEFAULT</h4>
<pre>static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ZK_PARENT_ZNODE_DEFAULT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ZK_PARENT_ZNODE_DEFAULT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ZKFC_CONF_KEYS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZKFC_CONF_KEYS</h4>
<pre>protected static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[] ZKFC_CONF_KEYS</pre>
<div class="block">All of the conf keys used by the ZKFC. This is used in order to allow
 them to be overridden on a per-nameservice or per-namenode basis.</div>
</li>
</ul>
<a name="USAGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>USAGE</h4>
<pre>protected static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> USAGE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.USAGE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERR_CODE_FORMAT_DENIED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERR_CODE_FORMAT_DENIED</h4>
<pre>static final&nbsp;int ERR_CODE_FORMAT_DENIED</pre>
<div class="block">Unable to format the parent znode in ZK</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ERR_CODE_FORMAT_DENIED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERR_CODE_NO_PARENT_ZNODE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERR_CODE_NO_PARENT_ZNODE</h4>
<pre>static final&nbsp;int ERR_CODE_NO_PARENT_ZNODE</pre>
<div class="block">The parent znode doesn't exist in ZK</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ERR_CODE_NO_PARENT_ZNODE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERR_CODE_NO_FENCER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERR_CODE_NO_FENCER</h4>
<pre>static final&nbsp;int ERR_CODE_NO_FENCER</pre>
<div class="block">Fencing is not properly configured</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ERR_CODE_NO_FENCER">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERR_CODE_AUTO_FAILOVER_NOT_ENABLED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERR_CODE_AUTO_FAILOVER_NOT_ENABLED</h4>
<pre>static final&nbsp;int ERR_CODE_AUTO_FAILOVER_NOT_ENABLED</pre>
<div class="block">Automatic failover is not enabled</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ERR_CODE_AUTO_FAILOVER_NOT_ENABLED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERR_CODE_NO_ZK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERR_CODE_NO_ZK</h4>
<pre>static final&nbsp;int ERR_CODE_NO_ZK</pre>
<div class="block">Cannot connect to ZooKeeper</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ZKFailoverController.ERR_CODE_NO_ZK">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="conf">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conf</h4>
<pre>protected&nbsp;<a href="../../../../org/apache/hadoop/conf/Configuration.html" title="class in org.apache.hadoop.conf">Configuration</a> conf</pre>
</li>
</ul>
<a name="zkQuorum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkQuorum</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> zkQuorum</pre>
</li>
</ul>
<a name="localTarget">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localTarget</h4>
<pre>protected final&nbsp;<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a> localTarget</pre>
</li>
</ul>
<a name="healthMonitor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>healthMonitor</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/HealthMonitor.html" title="class in org.apache.hadoop.ha">HealthMonitor</a> healthMonitor</pre>
</li>
</ul>
<a name="elector">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>elector</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector</a> elector</pre>
</li>
</ul>
<a name="rpcServer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rpcServer</h4>
<pre>protected&nbsp;<a href="../../../../org/apache/hadoop/ha/ZKFCRpcServer.html" title="class in org.apache.hadoop.ha">ZKFCRpcServer</a> rpcServer</pre>
</li>
</ul>
<a name="lastHealthState">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastHealthState</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/HealthMonitor.State.html" title="enum in org.apache.hadoop.ha">HealthMonitor.State</a> lastHealthState</pre>
</li>
</ul>
<a name="serviceState">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serviceState</h4>
<pre>private volatile&nbsp;<a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.HAServiceState.html" title="enum in org.apache.hadoop.ha">HAServiceProtocol.HAServiceState</a> serviceState</pre>
</li>
</ul>
<a name="fatalError">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fatalError</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> fatalError</pre>
<div class="block">Set if a fatal error occurs</div>
</li>
</ul>
<a name="delayJoiningUntilNanotime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delayJoiningUntilNanotime</h4>
<pre>private&nbsp;long delayJoiningUntilNanotime</pre>
<div class="block">A future nanotime before which the ZKFC will not join the election.
 This is used during graceful failover.</div>
</li>
</ul>
<a name="delayExecutor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delayExecutor</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a> delayExecutor</pre>
<div class="block">Executor on which <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#scheduleRecheck(long)"><code>scheduleRecheck(long)</code></a> schedules events</div>
</li>
</ul>
<a name="lastActiveAttemptRecord">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastActiveAttemptRecord</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ActiveAttemptRecord</a> lastActiveAttemptRecord</pre>
</li>
</ul>
<a name="activeAttemptRecordLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activeAttemptRecordLock</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a> activeAttemptRecordLock</pre>
</li>
</ul>
<a name="serviceStateMismatchCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serviceStateMismatchCount</h4>
<pre>int serviceStateMismatchCount</pre>
</li>
</ul>
<a name="quitElectionOnBadState">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>quitElectionOnBadState</h4>
<pre>boolean quitElectionOnBadState</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ZKFailoverController(org.apache.hadoop.conf.Configuration, org.apache.hadoop.ha.HAServiceTarget)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ZKFailoverController</h4>
<pre>protected&nbsp;ZKFailoverController(<a href="../../../../org/apache/hadoop/conf/Configuration.html" title="class in org.apache.hadoop.conf">Configuration</a>&nbsp;conf,
                    <a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;localTarget)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="targetToData(org.apache.hadoop.ha.HAServiceTarget)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>targetToData</h4>
<pre>protected abstract&nbsp;byte[]&nbsp;targetToData(<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;target)</pre>
</li>
</ul>
<a name="dataToTarget(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataToTarget</h4>
<pre>protected abstract&nbsp;<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;dataToTarget(byte[]&nbsp;data)</pre>
</li>
</ul>
<a name="loginAsFCUser()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loginAsFCUser</h4>
<pre>protected abstract&nbsp;void&nbsp;loginAsFCUser()
                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="checkRpcAdminAccess()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkRpcAdminAccess</h4>
<pre>protected abstract&nbsp;void&nbsp;checkRpcAdminAccess()
                                     throws <a href="../../../../org/apache/hadoop/security/AccessControlException.html" title="class in org.apache.hadoop.security">AccessControlException</a>,
                                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/security/AccessControlException.html" title="class in org.apache.hadoop.security">AccessControlException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getRpcAddressToBindTo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRpcAddressToBindTo</h4>
<pre>protected abstract&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;getRpcAddressToBindTo()</pre>
</li>
</ul>
<a name="getPolicyProvider()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPolicyProvider</h4>
<pre>protected abstract&nbsp;<a href="../../../../org/apache/hadoop/security/authorize/PolicyProvider.html" title="class in org.apache.hadoop.security.authorize">PolicyProvider</a>&nbsp;getPolicyProvider()</pre>
</li>
</ul>
<a name="getScopeInsideParentNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScopeInsideParentNode</h4>
<pre>protected abstract&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getScopeInsideParentNode()</pre>
<div class="block">Return the name of a znode inside the configured parent znode in which
 the ZKFC will do all of its work. This is so that multiple federated
 nameservices can run on the same ZK quorum without having to manually
 configure them to separate subdirectories.</div>
</li>
</ul>
<a name="getLocalTarget()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalTarget</h4>
<pre>public&nbsp;<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;getLocalTarget()</pre>
</li>
</ul>
<a name="getServiceState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceState</h4>
<pre><a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.HAServiceState.html" title="enum in org.apache.hadoop.ha">HAServiceProtocol.HAServiceState</a>&nbsp;getServiceState()</pre>
</li>
</ul>
<a name="run(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;int&nbsp;run(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)
        throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="doRun(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRun</h4>
<pre>private&nbsp;int&nbsp;doRun(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)
           throws <a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a>,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                  <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="badArg(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>badArg</h4>
<pre>private&nbsp;void&nbsp;badArg(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg)</pre>
</li>
</ul>
<a name="printUsage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printUsage</h4>
<pre>private&nbsp;void&nbsp;printUsage()</pre>
</li>
</ul>
<a name="formatZK(boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>formatZK</h4>
<pre>private&nbsp;int&nbsp;formatZK(boolean&nbsp;force,
           boolean&nbsp;interactive)
              throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                     <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="confirmFormat()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>confirmFormat</h4>
<pre>private&nbsp;boolean&nbsp;confirmFormat()</pre>
</li>
</ul>
<a name="initHM()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initHM</h4>
<pre>private&nbsp;void&nbsp;initHM()</pre>
</li>
</ul>
<a name="initRPC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initRPC</h4>
<pre>protected&nbsp;void&nbsp;initRPC()
                throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="startRPC()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startRPC</h4>
<pre>protected&nbsp;void&nbsp;startRPC()
                 throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="initZK()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initZK</h4>
<pre>private&nbsp;void&nbsp;initZK()
             throws <a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a>,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                    org.apache.zookeeper.KeeperException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
<a name="getParentZnode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParentZnode</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getParentZnode()</pre>
</li>
</ul>
<a name="mainLoop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mainLoop</h4>
<pre>private&nbsp;void&nbsp;mainLoop()
               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="fatalError(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fatalError</h4>
<pre>private&nbsp;void&nbsp;fatalError(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;err)</pre>
</li>
</ul>
<a name="becomeActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>becomeActive</h4>
<pre>private&nbsp;void&nbsp;becomeActive()
                   throws <a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></code></dd></dl>
</li>
</ul>
<a name="recordActiveAttempt(org.apache.hadoop.ha.ZKFailoverController.ActiveAttemptRecord)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordActiveAttempt</h4>
<pre>private&nbsp;void&nbsp;recordActiveAttempt(<a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ActiveAttemptRecord</a>&nbsp;record)</pre>
<div class="block">Store the results of the last attempt to become active.
 This is used so that, during manually initiated failover,
 we can report back the results of the attempt to become active
 to the initiator of the failover.</div>
</li>
</ul>
<a name="waitForActiveAttempt(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForActiveAttempt</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha">ZKFailoverController.ActiveAttemptRecord</a>&nbsp;waitForActiveAttempt(int&nbsp;timeoutMillis)
                                                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Wait until one of the following events:
 <ul>
 <li>Another thread publishes the results of an attempt to become active
 using <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#recordActiveAttempt(org.apache.hadoop.ha.ZKFailoverController.ActiveAttemptRecord)"><code>recordActiveAttempt(ActiveAttemptRecord)</code></a></li>
 <li>The node enters bad health status</li>
 <li>The specified timeout elapses</li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeoutMillis</code> - number of millis to wait</dd>
<dt><span class="strong">Returns:</span></dt><dd>the published record, or null if the timeout elapses or the
 service becomes unhealthy</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the thread is interrupted.</dd></dl>
</li>
</ul>
<a name="createReqInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createReqInfo</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.StateChangeRequestInfo.html" title="class in org.apache.hadoop.ha">HAServiceProtocol.StateChangeRequestInfo</a>&nbsp;createReqInfo()</pre>
</li>
</ul>
<a name="becomeStandby()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>becomeStandby</h4>
<pre>private&nbsp;void&nbsp;becomeStandby()</pre>
</li>
</ul>
<a name="fenceOldActive(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fenceOldActive</h4>
<pre>private&nbsp;void&nbsp;fenceOldActive(byte[]&nbsp;data)</pre>
</li>
</ul>
<a name="doFence(org.apache.hadoop.ha.HAServiceTarget)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doFence</h4>
<pre>private&nbsp;void&nbsp;doFence(<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;target)</pre>
</li>
</ul>
<a name="cedeActive(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cedeActive</h4>
<pre>void&nbsp;cedeActive(int&nbsp;millisToCede)
          throws <a href="../../../../org/apache/hadoop/security/AccessControlException.html" title="class in org.apache.hadoop.security">AccessControlException</a>,
                 <a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a>,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Request from graceful failover to cede active role. Causes
 this ZKFC to transition its local node to standby, then quit
 the election for the specified period of time, after which it
 will rejoin iff it is healthy.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/security/AccessControlException.html" title="class in org.apache.hadoop.security">AccessControlException</a></code></dd>
<dd><code><a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="doCedeActive(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCedeActive</h4>
<pre>private&nbsp;void&nbsp;doCedeActive(int&nbsp;millisToCede)
                   throws <a href="../../../../org/apache/hadoop/security/AccessControlException.html" title="class in org.apache.hadoop.security">AccessControlException</a>,
                          <a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a>,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/security/AccessControlException.html" title="class in org.apache.hadoop.security">AccessControlException</a></code></dd>
<dd><code><a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="gracefulFailoverToYou()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gracefulFailoverToYou</h4>
<pre>void&nbsp;gracefulFailoverToYou()
                     throws <a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a>,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Coordinate a graceful failover to this node.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></code> - if the node fails to become active</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - some other error occurs</dd></dl>
</li>
</ul>
<a name="doGracefulFailover()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doGracefulFailover</h4>
<pre>private&nbsp;void&nbsp;doGracefulFailover()
                         throws <a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a>,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Coordinate a graceful failover. This proceeds in several phases:
 1) Pre-flight checks: ensure that the local node is healthy, and
 thus a candidate for failover.
 2) Determine the current active node. If it is the local node, no
 need to failover - return success.
 3) Ask that node to yield from the election for a number of seconds.
 4) Allow the normal election path to run in other threads. Wait until
 we either become unhealthy or we see an election attempt recorded by
 the normal code path.
 5) Allow the old active to rejoin the election, so a future
 failback is possible.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="checkEligibleForFailover()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkEligibleForFailover</h4>
<pre>private&nbsp;void&nbsp;checkEligibleForFailover()
                               throws <a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></pre>
<div class="block">Ensure that the local node is in a healthy state, and thus
 eligible for graceful failover.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/ha/ServiceFailedException.html" title="class in org.apache.hadoop.ha">ServiceFailedException</a></code> - if the node is unhealthy</dd></dl>
</li>
</ul>
<a name="getCurrentActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentActive</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha">HAServiceTarget</a>&nbsp;getCurrentActive()
                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                         <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>an <a href="../../../../org/apache/hadoop/ha/HAServiceTarget.html" title="class in org.apache.hadoop.ha"><code>HAServiceTarget</code></a> for the current active node
 in the cluster, or null if no node is active.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if a ZK-related issue occurs</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if thread is interrupted</dd></dl>
</li>
</ul>
<a name="recheckElectability()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recheckElectability</h4>
<pre>private&nbsp;void&nbsp;recheckElectability()</pre>
<div class="block">Check the current state of the service, and join the election
 if it should be in the election.</div>
</li>
</ul>
<a name="scheduleRecheck(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleRecheck</h4>
<pre>private&nbsp;void&nbsp;scheduleRecheck(long&nbsp;whenNanos)</pre>
<div class="block">Schedule a call to <a href="../../../../org/apache/hadoop/ha/ZKFailoverController.html#recheckElectability()"><code>recheckElectability()</code></a> in the future.</div>
</li>
</ul>
<a name="verifyChangedServiceState(org.apache.hadoop.ha.HAServiceProtocol.HAServiceState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyChangedServiceState</h4>
<pre>void&nbsp;verifyChangedServiceState(<a href="../../../../org/apache/hadoop/ha/HAServiceProtocol.HAServiceState.html" title="enum in org.apache.hadoop.ha">HAServiceProtocol.HAServiceState</a>&nbsp;changedState)</pre>
</li>
</ul>
<a name="getLastHealthState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastHealthState</h4>
<pre><a href="../../../../org/apache/hadoop/ha/HealthMonitor.State.html" title="enum in org.apache.hadoop.ha">HealthMonitor.State</a>&nbsp;getLastHealthState()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>the last health state passed to the FC
 by the HealthMonitor.</dd></dl>
</li>
</ul>
<a name="setLastHealthState(org.apache.hadoop.ha.HealthMonitor.State)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastHealthState</h4>
<pre>private&nbsp;void&nbsp;setLastHealthState(<a href="../../../../org/apache/hadoop/ha/HealthMonitor.State.html" title="enum in org.apache.hadoop.ha">HealthMonitor.State</a>&nbsp;newState)</pre>
</li>
</ul>
<a name="getElectorForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getElectorForTests</h4>
<pre><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector</a>&nbsp;getElectorForTests()</pre>
</li>
</ul>
<a name="getRpcServerForTests()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getRpcServerForTests</h4>
<pre><a href="../../../../org/apache/hadoop/ha/ZKFCRpcServer.html" title="class in org.apache.hadoop.ha">ZKFCRpcServer</a>&nbsp;getRpcServerForTests()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ZKFailoverController.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/hadoop/ha/TestZKFailoverControllerStress.RandomlyThrow.html" title="class in org.apache.hadoop.ha"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/hadoop/ha/ZKFailoverController.ActiveAttemptRecord.html" title="class in org.apache.hadoop.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/ha/ZKFailoverController.html" target="_top">Frames</a></li>
<li><a href="ZKFailoverController.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
