<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Wed Jun 10 18:00:45 EDT 2015 -->
<title>ActiveStandbyElector</title>
<meta name="date" content="2015-06-10">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ActiveStandbyElector";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ActiveStandbyElector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/ha/ActiveStandbyElector.html" target="_top">Frames</a></li>
<li><a href="ActiveStandbyElector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.ha</div>
<h2 title="Class ActiveStandbyElector" class="title">Class ActiveStandbyElector</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.ha.ActiveStandbyElector</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.zookeeper.AsyncCallback, org.apache.zookeeper.AsyncCallback.StatCallback, org.apache.zookeeper.AsyncCallback.StringCallback</dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
@InterfaceStability.Evolving
public class <span class="strong">ActiveStandbyElector</span>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements org.apache.zookeeper.AsyncCallback.StatCallback, org.apache.zookeeper.AsyncCallback.StringCallback</pre>
<div class="block">This class implements a simple library to perform leader election on top of
 Apache Zookeeper. Using Zookeeper as a coordination service, leader election
 can be performed by atomically creating an ephemeral lock file (znode) on
 Zookeeper. The service instance that successfully creates the znode becomes
 active and the rest become standbys. <br/>
 This election mechanism is only efficient for small number of election
 candidates (order of 10's) because contention on single znode by a large
 number of candidates can result in Zookeeper overload. <br/>
 The elector does not guarantee fencing (protection of shared resources) among
 service instances. After it has notified an instance about becoming a leader,
 then that instance must ensure that it meets the service consistency
 requirements. If it cannot do so, then it is recommended to quit the
 election. The application implements the <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha"><code>ActiveStandbyElector.ActiveStandbyElectorCallback</code></a>
 to interact with the elector</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.ActiveNotFoundException</a></strong></code>
<div class="block">Exception thrown when there is no active leader</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a></strong></code>
<div class="block">Callback interface to interact with the ActiveStandbyElector object.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.zookeeper.AsyncCallback">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.zookeeper.AsyncCallback</h3>
<code>org.apache.zookeeper.AsyncCallback.ACLCallback, org.apache.zookeeper.AsyncCallback.Children2Callback, org.apache.zookeeper.AsyncCallback.ChildrenCallback, org.apache.zookeeper.AsyncCallback.DataCallback, org.apache.zookeeper.AsyncCallback.StatCallback, org.apache.zookeeper.AsyncCallback.StringCallback, org.apache.zookeeper.AsyncCallback.VoidCallback</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#ActiveStandbyElector(java.lang.String,%20int,%20java.lang.String,%20java.util.List,%20java.util.List,%20org.apache.hadoop.ha.ActiveStandbyElector.ActiveStandbyElectorCallback,%20int)">ActiveStandbyElector</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;zookeeperHostPorts,
                    int&nbsp;zookeeperSessionTimeout,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentZnodeName,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt;&nbsp;acl,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/hadoop/util/ZKUtil.ZKAuthInfo.html" title="class in org.apache.hadoop.util">ZKUtil.ZKAuthInfo</a>&gt;&nbsp;authInfo,
                    <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a>&nbsp;app,
                    int&nbsp;maxRetryNum)</code>
<div class="block">Create a new ActiveStandbyElector object <br/>
 The elector is created by providing to it the Zookeeper configuration, the
 parent znode under which to create the znode and a reference to the
 callback interface.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#clearParentZNode()">clearParentZNode</a></strong>()</code>
<div class="block">Clear all of the state held within the parent ZNode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#ensureParentZNode()">ensureParentZNode</a></strong>()</code>
<div class="block">Utility function to ensure that the configured base znode exists.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#getActiveData()">getActiveData</a></strong>()</code>
<div class="block">get data set by the active leader</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#joinElection(byte[])">joinElection</a></strong>(byte[]&nbsp;data)</code>
<div class="block">To participate in election, the app will call joinElection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#parentZNodeExists()">parentZNodeExists</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#processResult(int,%20java.lang.String,%20java.lang.Object,%20org.apache.zookeeper.data.Stat)">processResult</a></strong>(int&nbsp;rc,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
             org.apache.zookeeper.data.Stat&nbsp;stat)</code>
<div class="block">interface implementation of Zookeeper callback for monitor (exists)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#processResult(int,%20java.lang.String,%20java.lang.Object,%20java.lang.String)">processResult</a></strong>(int&nbsp;rc,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">interface implementation of Zookeeper callback for create</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#quitElection(boolean)">quitElection</a></strong>(boolean&nbsp;needFence)</code>
<div class="block">Any service instance can drop out of the election by calling quitElection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#terminateConnection()">terminateConnection</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LOG</h4>
<pre>public static final&nbsp;org.apache.commons.logging.Log LOG</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ActiveStandbyElector(java.lang.String, int, java.lang.String, java.util.List, java.util.List, org.apache.hadoop.ha.ActiveStandbyElector.ActiveStandbyElectorCallback, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ActiveStandbyElector</h4>
<pre>public&nbsp;ActiveStandbyElector(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;zookeeperHostPorts,
                    int&nbsp;zookeeperSessionTimeout,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentZnodeName,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt;&nbsp;acl,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/hadoop/util/ZKUtil.ZKAuthInfo.html" title="class in org.apache.hadoop.util">ZKUtil.ZKAuthInfo</a>&gt;&nbsp;authInfo,
                    <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a>&nbsp;app,
                    int&nbsp;maxRetryNum)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                            <a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a>,
                            org.apache.zookeeper.KeeperException</pre>
<div class="block">Create a new ActiveStandbyElector object <br/>
 The elector is created by providing to it the Zookeeper configuration, the
 parent znode under which to create the znode and a reference to the
 callback interface. <br/>
 The parent znode name must be the same for all service instances and
 different across services. <br/>
 After the leader has been lost, a new leader will be elected after the
 session timeout expires. Hence, the app must set this parameter based on
 its needs for failure response time. The session timeout must be greater
 than the Zookeeper disconnect timeout and is recommended to be 3X that
 value to enable Zookeeper to retry transient disconnections. Setting a very
 short session timeout may result in frequent transitions between active and
 standby states during issues like network outages/GS pauses.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>zookeeperHostPorts</code> - ZooKeeper hostPort for all ZooKeeper servers</dd><dd><code>zookeeperSessionTimeout</code> - ZooKeeper session timeout</dd><dd><code>parentZnodeName</code> - znode under which to create the lock</dd><dd><code>acl</code> - ZooKeeper ACL's</dd><dd><code>authInfo</code> - a list of authentication credentials to add to the
                 ZK connection</dd><dd><code>app</code> - reference to callback interface object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="joinElection(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinElection</h4>
<pre>public&nbsp;void&nbsp;joinElection(byte[]&nbsp;data)
                  throws <a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></pre>
<div class="block">To participate in election, the app will call joinElection. The result will
 be notified by a callback on either the becomeActive or becomeStandby app
 interfaces. <br/>
 After this the elector will automatically monitor the leader status and
 perform re-election if necessary<br/>
 The app could potentially start off in standby mode and ignore the
 becomeStandby call.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - to be set by the app. non-null data must be set.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></code> - if valid data is not supplied</dd></dl>
</li>
</ul>
<a name="parentZNodeExists()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parentZNodeExists</h4>
<pre>public&nbsp;boolean&nbsp;parentZNodeExists()
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the configured parent znode exists</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="ensureParentZNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureParentZNode</h4>
<pre>public&nbsp;void&nbsp;ensureParentZNode()
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                              <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Utility function to ensure that the configured base znode exists.
 This recursively creates the znode as well as all of its parents.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="clearParentZNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearParentZNode</h4>
<pre>public&nbsp;void&nbsp;clearParentZNode()
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Clear all of the state held within the parent ZNode.
 This recursively deletes everything within the znode as well as the
 parent znode itself. It should only be used when it's certain that
 no electors are currently participating in the election.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="quitElection(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>quitElection</h4>
<pre>public&nbsp;void&nbsp;quitElection(boolean&nbsp;needFence)</pre>
<div class="block">Any service instance can drop out of the election by calling quitElection. 
 <br/>
 This will lose any leader status, if held, and stop monitoring of the lock
 node. <br/>
 If the instance wants to participate in election again, then it needs to
 call joinElection(). <br/>
 This allows service instances to take themselves out of rotation for known
 impending unavailable states (e.g. long GC pause or software upgrade).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>needFence</code> - true if the underlying daemon may need to be fenced
 if a failover occurs due to dropping out of the election.</dd></dl>
</li>
</ul>
<a name="getActiveData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveData</h4>
<pre>public&nbsp;byte[]&nbsp;getActiveData()
                     throws <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.ActiveNotFoundException</a>,
                            org.apache.zookeeper.KeeperException,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">get data set by the active leader</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>data set by the active instance</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.ActiveNotFoundException</a></code> - when there is no active leader</dd>
<dd><code>org.apache.zookeeper.KeeperException</code> - other zookeeper operation errors</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - when ZooKeeper connection could not be established</dd></dl>
</li>
</ul>
<a name="processResult(int, java.lang.String, java.lang.Object, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processResult</h4>
<pre>public&nbsp;void&nbsp;processResult(int&nbsp;rc,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">interface implementation of Zookeeper callback for create</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>processResult</code>&nbsp;in interface&nbsp;<code>org.apache.zookeeper.AsyncCallback.StringCallback</code></dd>
</dl>
</li>
</ul>
<a name="processResult(int, java.lang.String, java.lang.Object, org.apache.zookeeper.data.Stat)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processResult</h4>
<pre>public&nbsp;void&nbsp;processResult(int&nbsp;rc,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
                 org.apache.zookeeper.data.Stat&nbsp;stat)</pre>
<div class="block">interface implementation of Zookeeper callback for monitor (exists)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>processResult</code>&nbsp;in interface&nbsp;<code>org.apache.zookeeper.AsyncCallback.StatCallback</code></dd>
</dl>
</li>
</ul>
<a name="terminateConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>terminateConnection</h4>
<pre>@InterfaceAudience.Private
public&nbsp;void&nbsp;terminateConnection()</pre>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ActiveStandbyElector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/ha/ActiveStandbyElector.html" target="_top">Frames</a></li>
<li><a href="ActiveStandbyElector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
