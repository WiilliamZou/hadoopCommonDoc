<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Sun Jun 14 15:33:45 EDT 2015 -->
<title>ActiveStandbyElector</title>
<meta name="date" content="2015-06-14">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ActiveStandbyElector";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ActiveStandbyElector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/ha/ActiveStandbyElector.html" target="_top">Frames</a></li>
<li><a href="ActiveStandbyElector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.ha</div>
<h2 title="Class ActiveStandbyElector" class="title">Class ActiveStandbyElector</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.ha.ActiveStandbyElector</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.zookeeper.AsyncCallback, org.apache.zookeeper.AsyncCallback.StatCallback, org.apache.zookeeper.AsyncCallback.StringCallback</dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
@InterfaceStability.Evolving
public class <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.70">ActiveStandbyElector</a>
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements org.apache.zookeeper.AsyncCallback.StatCallback, org.apache.zookeeper.AsyncCallback.StringCallback</pre>
<div class="block">This class implements a simple library to perform leader election on top of
 Apache Zookeeper. Using Zookeeper as a coordination service, leader election
 can be performed by atomically creating an ephemeral lock file (znode) on
 Zookeeper. The service instance that successfully creates the znode becomes
 active and the rest become standbys. <br/>
 This election mechanism is only efficient for small number of election
 candidates (order of 10's) because contention on single znode by a large
 number of candidates can result in Zookeeper overload. <br/>
 The elector does not guarantee fencing (protection of shared resources) among
 service instances. After it has notified an instance about becoming a leader,
 then that instance must ensure that it meets the service consistency
 requirements. If it cannot do so, then it is recommended to quit the
 election. The application implements the <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha"><code>ActiveStandbyElector.ActiveStandbyElectorCallback</code></a>
 to interact with the elector</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.ActiveNotFoundException</a></strong></code>
<div class="block">Exception thrown when there is no active leader</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a></strong></code>
<div class="block">Callback interface to interact with the ActiveStandbyElector object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ConnectionState.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.ConnectionState</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.State.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.State</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.WatcherWithClientRef.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.WatcherWithClientRef</a></strong></code>
<div class="block">Watcher implementation which keeps a reference around to the
 original ZK connection, and passes it back along with any
 events.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ZKAction.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ZKAction</a>&lt;<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ZKAction.html" title="type parameter in ActiveStandbyElector.ZKAction">T</a>&gt;</strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.apache.zookeeper.AsyncCallback">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.zookeeper.AsyncCallback</h3>
<code>org.apache.zookeeper.AsyncCallback.ACLCallback, org.apache.zookeeper.AsyncCallback.Children2Callback, org.apache.zookeeper.AsyncCallback.ChildrenCallback, org.apache.zookeeper.AsyncCallback.DataCallback, org.apache.zookeeper.AsyncCallback.StatCallback, org.apache.zookeeper.AsyncCallback.StringCallback, org.apache.zookeeper.AsyncCallback.VoidCallback</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#appClient">appClient</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#appData">appData</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#BREADCRUMB_FILENAME">BREADCRUMB_FILENAME</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#createRetryCount">createRetryCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#LOCK_FILENAME">LOCK_FILENAME</a></strong></code>
<div class="block">Name of the lock znode used by the library.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#LOG">LOG</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#maxRetryNum">maxRetryNum</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#sessionReestablishLockForTests">sessionReestablishLockForTests</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#SLEEP_AFTER_FAILURE_TO_BECOME_ACTIVE">SLEEP_AFTER_FAILURE_TO_BECOME_ACTIVE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.State.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.State</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#state">state</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#statRetryCount">statRetryCount</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#wantToBeInElection">wantToBeInElection</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.WatcherWithClientRef.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.WatcherWithClientRef</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#watcher">watcher</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkAcl">zkAcl</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/hadoop/util/ZKUtil.ZKAuthInfo.html" title="class in org.apache.hadoop.util">ZKUtil.ZKAuthInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkAuthInfo">zkAuthInfo</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkBreadCrumbPath">zkBreadCrumbPath</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.zookeeper.ZooKeeper</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkClient">zkClient</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ConnectionState.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.ConnectionState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkConnectionState">zkConnectionState</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkHostPort">zkHostPort</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkLockFilePath">zkLockFilePath</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkSessionTimeout">zkSessionTimeout</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#znodeWorkingDir">znodeWorkingDir</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#ActiveStandbyElector(java.lang.String,%20int,%20java.lang.String,%20java.util.List,%20java.util.List,%20org.apache.hadoop.ha.ActiveStandbyElector.ActiveStandbyElectorCallback,%20int)">ActiveStandbyElector</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;zookeeperHostPorts,
                                        int&nbsp;zookeeperSessionTimeout,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentZnodeName,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt;&nbsp;acl,
                                        <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/hadoop/util/ZKUtil.ZKAuthInfo.html" title="class in org.apache.hadoop.util">ZKUtil.ZKAuthInfo</a>&gt;&nbsp;authInfo,
                                        <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a>&nbsp;app,
                                        int&nbsp;maxRetryNum)</code>
<div class="block">Create a new ActiveStandbyElector object <br/>
 The elector is created by providing to it the Zookeeper configuration, the
 parent znode under which to create the znode and a reference to the
 callback interface.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#allowSessionReestablishmentForTests()">allowSessionReestablishmentForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#becomeActive()">becomeActive</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#becomeStandby()">becomeStandby</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#clearParentZNode()">clearParentZNode</a></strong>()</code>
<div class="block">Clear all of the state held within the parent ZNode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#createConnection()">createConnection</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#createLockNodeAsync()">createLockNodeAsync</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#createWithRetries(java.lang.String,%20byte[],%20java.util.List,%20org.apache.zookeeper.CreateMode)">createWithRetries</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                                  byte[]&nbsp;data,
                                  <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt;&nbsp;acl,
                                  org.apache.zookeeper.CreateMode&nbsp;mode)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#deleteWithRetries(java.lang.String,%20int)">deleteWithRetries</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                                  int&nbsp;version)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#ensureParentZNode()">ensureParentZNode</a></strong>()</code>
<div class="block">Utility function to ensure that the configured base znode exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#enterNeutralMode()">enterNeutralMode</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#fatalError(java.lang.String)">fatalError</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;errorMessage)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.zookeeper.data.Stat</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#fenceOldActive()">fenceOldActive</a></strong>()</code>
<div class="block">If there is a breadcrumb node indicating that another node may need
 fencing, try to fence that node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#getActiveData()">getActiveData</a></strong>()</code>
<div class="block">get data set by the active leader</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#getDataWithRetries(java.lang.String,%20boolean,%20org.apache.zookeeper.data.Stat)">getDataWithRetries</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                                    boolean&nbsp;watch,
                                    org.apache.zookeeper.data.Stat&nbsp;stat)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected org.apache.zookeeper.ZooKeeper</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#getNewZooKeeper()">getNewZooKeeper</a></strong>()</code>
<div class="block">Get a new zookeeper client instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.State.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.State</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#getStateForTests()">getStateForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#getZKSessionIdForTests()">getZKSessionIdForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#isNodeDoesNotExist(org.apache.zookeeper.KeeperException.Code)">isNodeDoesNotExist</a></strong>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#isNodeExists(org.apache.zookeeper.KeeperException.Code)">isNodeExists</a></strong>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#isSessionExpired(org.apache.zookeeper.KeeperException.Code)">isSessionExpired</a></strong>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#isStaleClient(java.lang.Object)">isStaleClient</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx)</code>
<div class="block">The callbacks and watchers pass a reference to the ZK client
 which made the original call.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#isSuccess(org.apache.zookeeper.KeeperException.Code)">isSuccess</a></strong>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#joinElection(byte[])">joinElection</a></strong>(byte[]&nbsp;data)</code>
<div class="block">To participate in election, the app will call joinElection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#joinElectionInternal()">joinElectionInternal</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#monitorActiveStatus()">monitorActiveStatus</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#monitorLockNodeAsync()">monitorLockNodeAsync</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#parentZNodeExists()">parentZNodeExists</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#preventSessionReestablishmentForTests()">preventSessionReestablishmentForTests</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#processResult(int,%20java.lang.String,%20java.lang.Object,%20org.apache.zookeeper.data.Stat)">processResult</a></strong>(int&nbsp;rc,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
                          org.apache.zookeeper.data.Stat&nbsp;stat)</code>
<div class="block">interface implementation of Zookeeper callback for monitor (exists)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#processResult(int,%20java.lang.String,%20java.lang.Object,%20java.lang.String)">processResult</a></strong>(int&nbsp;rc,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">interface implementation of Zookeeper callback for create</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#processWatchEvent(org.apache.zookeeper.ZooKeeper,%20org.apache.zookeeper.WatchedEvent)">processWatchEvent</a></strong>(org.apache.zookeeper.ZooKeeper&nbsp;zk,
                                  org.apache.zookeeper.WatchedEvent&nbsp;event)</code>
<div class="block">interface implementation of Zookeeper watch events (connection and node),
 proxied by <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.WatcherWithClientRef.html" title="class in org.apache.hadoop.ha"><code>ActiveStandbyElector.WatcherWithClientRef</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#quitElection(boolean)">quitElection</a></strong>(boolean&nbsp;needFence)</code>
<div class="block">Any service instance can drop out of the election by calling quitElection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#reEstablishSession()">reEstablishSession</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#reJoinElection(int)">reJoinElection</a></strong>(int&nbsp;sleepTime)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#reJoinElectionAfterFailureToBecomeActive()">reJoinElectionAfterFailureToBecomeActive</a></strong>()</code>
<div class="block">We failed to become active.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#reset()">reset</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.zookeeper.data.Stat</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#setDataWithRetries(java.lang.String,%20byte[],%20int)">setDataWithRetries</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                                    byte[]&nbsp;data,
                                    int&nbsp;version)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#shouldRetry(org.apache.zookeeper.KeeperException.Code)">shouldRetry</a></strong>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#sleepFor(int)">sleepFor</a></strong>(int&nbsp;sleepMs)</code>
<div class="block">Sleep for the given number of milliseconds.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#terminateConnection()">terminateConnection</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#tryDeleteOwnBreadCrumbNode()">tryDeleteOwnBreadCrumbNode</a></strong>()</code>
<div class="block">Try to delete the "ActiveBreadCrumb" node when gracefully giving up
 active status.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#writeBreadCrumbNode(org.apache.zookeeper.data.Stat)">writeBreadCrumbNode</a></strong>(org.apache.zookeeper.data.Stat&nbsp;oldBreadcrumbStat)</code>
<div class="block">Write the "ActiveBreadCrumb" node, indicating that this node may need
 to be fenced on failover.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private &lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.html#zkDoWithRetries(org.apache.hadoop.ha.ActiveStandbyElector.ZKAction)">zkDoWithRetries</a></strong>(<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ZKAction.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ZKAction</a>&lt;T&gt;&nbsp;action)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOCK_FILENAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOCK_FILENAME</h4>
<pre>protected static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.140">LOCK_FILENAME</a></pre>
<div class="block">Name of the lock znode used by the library. Protected for access in test
 classes</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ActiveStandbyElector.LOCK_FILENAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="BREADCRUMB_FILENAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BREADCRUMB_FILENAME</h4>
<pre>protected static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.142">BREADCRUMB_FILENAME</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ActiveStandbyElector.BREADCRUMB_FILENAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>public static final&nbsp;org.apache.commons.logging.Log <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.144">LOG</a></pre>
</li>
</ul>
<a name="SLEEP_AFTER_FAILURE_TO_BECOME_ACTIVE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SLEEP_AFTER_FAILURE_TO_BECOME_ACTIVE</h4>
<pre>private static final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.146">SLEEP_AFTER_FAILURE_TO_BECOME_ACTIVE</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.apache.hadoop.ha.ActiveStandbyElector.SLEEP_AFTER_FAILURE_TO_BECOME_ACTIVE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="state">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.State.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.State</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.156">state</a></pre>
</li>
</ul>
<a name="createRetryCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRetryCount</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.157">createRetryCount</a></pre>
</li>
</ul>
<a name="statRetryCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>statRetryCount</h4>
<pre>private&nbsp;int <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.158">statRetryCount</a></pre>
</li>
</ul>
<a name="zkClient">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkClient</h4>
<pre>private&nbsp;org.apache.zookeeper.ZooKeeper <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.159">zkClient</a></pre>
</li>
</ul>
<a name="watcher">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>watcher</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.WatcherWithClientRef.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.WatcherWithClientRef</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.160">watcher</a></pre>
</li>
</ul>
<a name="zkConnectionState">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkConnectionState</h4>
<pre>private&nbsp;<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ConnectionState.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.ConnectionState</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.161">zkConnectionState</a></pre>
</li>
</ul>
<a name="appClient">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appClient</h4>
<pre>private final&nbsp;<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.163">appClient</a></pre>
</li>
</ul>
<a name="zkHostPort">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkHostPort</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.164">zkHostPort</a></pre>
</li>
</ul>
<a name="zkSessionTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkSessionTimeout</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.165">zkSessionTimeout</a></pre>
</li>
</ul>
<a name="zkAcl">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkAcl</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt; <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.166">zkAcl</a></pre>
</li>
</ul>
<a name="zkAuthInfo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkAuthInfo</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/hadoop/util/ZKUtil.ZKAuthInfo.html" title="class in org.apache.hadoop.util">ZKUtil.ZKAuthInfo</a>&gt; <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.167">zkAuthInfo</a></pre>
</li>
</ul>
<a name="appData">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appData</h4>
<pre>private&nbsp;byte[] <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.168">appData</a></pre>
</li>
</ul>
<a name="zkLockFilePath">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkLockFilePath</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.169">zkLockFilePath</a></pre>
</li>
</ul>
<a name="zkBreadCrumbPath">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkBreadCrumbPath</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.170">zkBreadCrumbPath</a></pre>
</li>
</ul>
<a name="znodeWorkingDir">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>znodeWorkingDir</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.171">znodeWorkingDir</a></pre>
</li>
</ul>
<a name="maxRetryNum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxRetryNum</h4>
<pre>private final&nbsp;int <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.172">maxRetryNum</a></pre>
</li>
</ul>
<a name="sessionReestablishLockForTests">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sessionReestablishLockForTests</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a> <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.174">sessionReestablishLockForTests</a></pre>
</li>
</ul>
<a name="wantToBeInElection">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>wantToBeInElection</h4>
<pre>private&nbsp;boolean <a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.175">wantToBeInElection</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ActiveStandbyElector(java.lang.String, int, java.lang.String, java.util.List, java.util.List, org.apache.hadoop.ha.ActiveStandbyElector.ActiveStandbyElectorCallback, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ActiveStandbyElector</h4>
<pre>public&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.207">ActiveStandbyElector</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;zookeeperHostPorts,
                    int&nbsp;zookeeperSessionTimeout,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentZnodeName,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt;&nbsp;acl,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/hadoop/util/ZKUtil.ZKAuthInfo.html" title="class in org.apache.hadoop.util">ZKUtil.ZKAuthInfo</a>&gt;&nbsp;authInfo,
                    <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveStandbyElectorCallback.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ActiveStandbyElectorCallback</a>&nbsp;app,
                    int&nbsp;maxRetryNum)
                     throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                            <a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a>,
                            org.apache.zookeeper.KeeperException</pre>
<div class="block">Create a new ActiveStandbyElector object <br/>
 The elector is created by providing to it the Zookeeper configuration, the
 parent znode under which to create the znode and a reference to the
 callback interface. <br/>
 The parent znode name must be the same for all service instances and
 different across services. <br/>
 After the leader has been lost, a new leader will be elected after the
 session timeout expires. Hence, the app must set this parameter based on
 its needs for failure response time. The session timeout must be greater
 than the Zookeeper disconnect timeout and is recommended to be 3X that
 value to enable Zookeeper to retry transient disconnections. Setting a very
 short session timeout may result in frequent transitions between active and
 standby states during issues like network outages/GS pauses.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>zookeeperHostPorts</code> - ZooKeeper hostPort for all ZooKeeper servers</dd><dd><code>zookeeperSessionTimeout</code> - ZooKeeper session timeout</dd><dd><code>parentZnodeName</code> - znode under which to create the lock</dd><dd><code>acl</code> - ZooKeeper ACL's</dd><dd><code>authInfo</code> - a list of authentication credentials to add to the
                 ZK connection</dd><dd><code>app</code> - reference to callback interface object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="joinElection(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinElection</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.244">joinElection</a>(byte[]&nbsp;data)
                  throws <a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></pre>
<div class="block">To participate in election, the app will call joinElection. The result will
 be notified by a callback on either the becomeActive or becomeStandby app
 interfaces. <br/>
 After this the elector will automatically monitor the leader status and
 perform re-election if necessary<br/>
 The app could potentially start off in standby mode and ignore the
 becomeStandby call.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - to be set by the app. non-null data must be set.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/HadoopIllegalArgumentException.html" title="class in org.apache.hadoop">HadoopIllegalArgumentException</a></code> - if valid data is not supplied</dd></dl>
</li>
</ul>
<a name="parentZNodeExists()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parentZNodeExists</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.266">parentZNodeExists</a>()
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the configured parent znode exists</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="ensureParentZNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureParentZNode</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.281">ensureParentZNode</a>()
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                              <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Utility function to ensure that the configured base znode exists.
 This recursively creates the znode as well as all of its parents.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="clearParentZNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearParentZNode</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.317">clearParentZNode</a>()
                      throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                             <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Clear all of the state held within the parent ZNode.
 This recursively deletes everything within the znode as well as the
 parent znode itself. It should only be used when it's certain that
 no electors are currently participating in the election.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="quitElection(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>quitElection</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.353">quitElection</a>(boolean&nbsp;needFence)</pre>
<div class="block">Any service instance can drop out of the election by calling quitElection. 
 <br/>
 This will lose any leader status, if held, and stop monitoring of the lock
 node. <br/>
 If the instance wants to participate in election again, then it needs to
 call joinElection(). <br/>
 This allows service instances to take themselves out of rotation for known
 impending unavailable states (e.g. long GC pause or software upgrade).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>needFence</code> - true if the underlying daemon may need to be fenced
 if a failover occurs due to dropping out of the election.</dd></dl>
</li>
</ul>
<a name="getActiveData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveData</h4>
<pre>public&nbsp;byte[]&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.383">getActiveData</a>()
                     throws <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.ActiveNotFoundException</a>,
                            org.apache.zookeeper.KeeperException,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                            <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">get data set by the active leader</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>data set by the active instance</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha">ActiveStandbyElector.ActiveNotFoundException</a></code> - when there is no active leader</dd>
<dd><code>org.apache.zookeeper.KeeperException</code> - other zookeeper operation errors</dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - when ZooKeeper connection could not be established</dd></dl>
</li>
</ul>
<a name="processResult(int, java.lang.String, java.lang.Object, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processResult</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.406">processResult</a>(int&nbsp;rc,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">interface implementation of Zookeeper callback for create</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>processResult</code>&nbsp;in interface&nbsp;<code>org.apache.zookeeper.AsyncCallback.StringCallback</code></dd>
</dl>
</li>
</ul>
<a name="processResult(int, java.lang.String, java.lang.Object, org.apache.zookeeper.data.Stat)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processResult</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.464">processResult</a>(int&nbsp;rc,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx,
                 org.apache.zookeeper.data.Stat&nbsp;stat)</pre>
<div class="block">interface implementation of Zookeeper callback for monitor (exists)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>processResult</code>&nbsp;in interface&nbsp;<code>org.apache.zookeeper.AsyncCallback.StatCallback</code></dd>
</dl>
</li>
</ul>
<a name="reJoinElectionAfterFailureToBecomeActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reJoinElectionAfterFailureToBecomeActive</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.527">reJoinElectionAfterFailureToBecomeActive</a>()</pre>
<div class="block">We failed to become active. Re-join the election, but
 sleep for a few seconds after terminating our existing
 session, so that other nodes have a chance to become active.
 The failure to become active is already logged inside
 becomeActive().</div>
</li>
</ul>
<a name="processWatchEvent(org.apache.zookeeper.ZooKeeper, org.apache.zookeeper.WatchedEvent)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processWatchEvent</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.535">processWatchEvent</a>(org.apache.zookeeper.ZooKeeper&nbsp;zk,
                     org.apache.zookeeper.WatchedEvent&nbsp;event)</pre>
<div class="block">interface implementation of Zookeeper watch events (connection and node),
 proxied by <a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.WatcherWithClientRef.html" title="class in org.apache.hadoop.ha"><code>ActiveStandbyElector.WatcherWithClientRef</code></a>.</div>
</li>
</ul>
<a name="getNewZooKeeper()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewZooKeeper</h4>
<pre>protected&nbsp;org.apache.zookeeper.ZooKeeper&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.619">getNewZooKeeper</a>()
                                                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                                         org.apache.zookeeper.KeeperException</pre>
<div class="block">Get a new zookeeper client instance. protected so that test class can
 inherit and pass in a mock object for zookeeper</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>new zookeeper client instance</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code> - zookeeper connectionloss exception</dd></dl>
</li>
</ul>
<a name="fatalError(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fatalError</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.641">fatalError</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;errorMessage)</pre>
</li>
</ul>
<a name="monitorActiveStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>monitorActiveStatus</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.647">monitorActiveStatus</a>()</pre>
</li>
</ul>
<a name="joinElectionInternal()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinElectionInternal</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.654">joinElectionInternal</a>()</pre>
</li>
</ul>
<a name="reJoinElection(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reJoinElection</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.669">reJoinElection</a>(int&nbsp;sleepTime)</pre>
</li>
</ul>
<a name="sleepFor(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sleepFor</h4>
<pre>protected&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.702">sleepFor</a>(int&nbsp;sleepMs)</pre>
<div class="block">Sleep for the given number of milliseconds.
 This is non-static, and separated out, so that unit tests
 can override the behavior not to sleep.</div>
</li>
</ul>
<a name="preventSessionReestablishmentForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>preventSessionReestablishmentForTests</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.713">preventSessionReestablishmentForTests</a>()</pre>
</li>
</ul>
<a name="allowSessionReestablishmentForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allowSessionReestablishmentForTests</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.718">allowSessionReestablishmentForTests</a>()</pre>
</li>
</ul>
<a name="getZKSessionIdForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getZKSessionIdForTests</h4>
<pre>long&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.723">getZKSessionIdForTests</a>()</pre>
</li>
</ul>
<a name="getStateForTests()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStateForTests</h4>
<pre><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.State.html" title="enum in org.apache.hadoop.ha">ActiveStandbyElector.State</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.732">getStateForTests</a>()</pre>
</li>
</ul>
<a name="reEstablishSession()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reEstablishSession</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.736">reEstablishSession</a>()</pre>
</li>
</ul>
<a name="createConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createConnection</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.756">createConnection</a>()
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                              org.apache.zookeeper.KeeperException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
<a name="terminateConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>terminateConnection</h4>
<pre>@InterfaceAudience.Private
public&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.772">terminateConnection</a>()</pre>
</li>
</ul>
<a name="reset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.789">reset</a>()</pre>
</li>
</ul>
<a name="becomeActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>becomeActive</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.794">becomeActive</a>()</pre>
</li>
</ul>
<a name="writeBreadCrumbNode(org.apache.zookeeper.data.Stat)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeBreadCrumbNode</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.820">writeBreadCrumbNode</a>(org.apache.zookeeper.data.Stat&nbsp;oldBreadcrumbStat)
                          throws org.apache.zookeeper.KeeperException,
                                 <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Write the "ActiveBreadCrumb" node, indicating that this node may need
 to be fenced on failover.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>oldBreadcrumbStat</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.zookeeper.KeeperException</code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="tryDeleteOwnBreadCrumbNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryDeleteOwnBreadCrumbNode</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.842">tryDeleteOwnBreadCrumbNode</a>()</pre>
<div class="block">Try to delete the "ActiveBreadCrumb" node when gracefully giving up
 active status.
 If this fails, it will simply warn, since the graceful release behavior
 is only an optimization.</div>
</li>
</ul>
<a name="fenceOldActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fenceOldActive</h4>
<pre>private&nbsp;org.apache.zookeeper.data.Stat&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.874">fenceOldActive</a>()
                                               throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                                      org.apache.zookeeper.KeeperException</pre>
<div class="block">If there is a breadcrumb node indicating that another node may need
 fencing, try to fence that node.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the Stat of the breadcrumb node that was read, or null
 if no breadcrumb node existed</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
<a name="becomeStandby()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>becomeStandby</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.907">becomeStandby</a>()</pre>
</li>
</ul>
<a name="enterNeutralMode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enterNeutralMode</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.915">enterNeutralMode</a>()</pre>
</li>
</ul>
<a name="createLockNodeAsync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLockNodeAsync</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.923">createLockNodeAsync</a>()</pre>
</li>
</ul>
<a name="monitorLockNodeAsync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>monitorLockNodeAsync</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.928">monitorLockNodeAsync</a>()</pre>
</li>
</ul>
<a name="createWithRetries(java.lang.String, byte[], java.util.List, org.apache.zookeeper.CreateMode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createWithRetries</h4>
<pre>private&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.934">createWithRetries</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                       byte[]&nbsp;data,
                       <a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;org.apache.zookeeper.data.ACL&gt;&nbsp;acl,
                       org.apache.zookeeper.CreateMode&nbsp;mode)
                          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                 org.apache.zookeeper.KeeperException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
<a name="getDataWithRetries(java.lang.String, boolean, org.apache.zookeeper.data.Stat)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataWithRetries</h4>
<pre>private&nbsp;byte[]&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.945">getDataWithRetries</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                        boolean&nbsp;watch,
                        org.apache.zookeeper.data.Stat&nbsp;stat)
                           throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                  org.apache.zookeeper.KeeperException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
<a name="setDataWithRetries(java.lang.String, byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDataWithRetries</h4>
<pre>private&nbsp;org.apache.zookeeper.data.Stat&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.955">setDataWithRetries</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                                                byte[]&nbsp;data,
                                                int&nbsp;version)
                                                   throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                                          org.apache.zookeeper.KeeperException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code>org.apache.zookeeper.KeeperException</code></dd></dl>
</li>
</ul>
<a name="deleteWithRetries(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteWithRetries</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.965">deleteWithRetries</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;path,
                     int&nbsp;version)
                        throws org.apache.zookeeper.KeeperException,
                               <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.zookeeper.KeeperException</code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="zkDoWithRetries(org.apache.hadoop.ha.ActiveStandbyElector.ZKAction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zkDoWithRetries</h4>
<pre>private&nbsp;&lt;T&gt;&nbsp;T&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.976">zkDoWithRetries</a>(<a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ZKAction.html" title="interface in org.apache.hadoop.ha">ActiveStandbyElector.ZKAction</a>&lt;T&gt;&nbsp;action)
                   throws org.apache.zookeeper.KeeperException,
                          <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.zookeeper.KeeperException</code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="isStaleClient(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStaleClient</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.1003">isStaleClient</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;ctx)</pre>
<div class="block">The callbacks and watchers pass a reference to the ZK client
 which made the original call. We don't want to take action
 based on any callbacks from prior clients after we quit
 the election.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ctx</code> - the ZK client passed into the watcher</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if it matches the current client</dd></dl>
</li>
</ul>
<a name="isSuccess(org.apache.zookeeper.KeeperException.Code)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSuccess</h4>
<pre>private static&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.1080">isSuccess</a>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</pre>
</li>
</ul>
<a name="isNodeExists(org.apache.zookeeper.KeeperException.Code)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNodeExists</h4>
<pre>private static&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.1084">isNodeExists</a>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</pre>
</li>
</ul>
<a name="isNodeDoesNotExist(org.apache.zookeeper.KeeperException.Code)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNodeDoesNotExist</h4>
<pre>private static&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.1088">isNodeDoesNotExist</a>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</pre>
</li>
</ul>
<a name="isSessionExpired(org.apache.zookeeper.KeeperException.Code)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSessionExpired</h4>
<pre>private static&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.1092">isSessionExpired</a>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</pre>
</li>
</ul>
<a name="shouldRetry(org.apache.zookeeper.KeeperException.Code)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldRetry</h4>
<pre>private static&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.1096">shouldRetry</a>(org.apache.zookeeper.KeeperException.Code&nbsp;code)</pre>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../../src-html/org/apache/hadoop/ha/ActiveStandbyElector.html#line.1101">toString</a>()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ActiveStandbyElector.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/apache/hadoop/ha/ActiveStandbyElector.ActiveNotFoundException.html" title="class in org.apache.hadoop.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/hadoop/ha/ActiveStandbyElector.html" target="_top">Frames</a></li>
<li><a href="ActiveStandbyElector.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
