<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Sun Jun 14 15:33:52 EDT 2015 -->
<title>ValueQueue</title>
<meta name="date" content="2015-06-14">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ValueQueue";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ValueQueue.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/crypto/key/kms/LoadBalancingKMSClientProvider.WrapperException.html" title="class in org.apache.hadoop.crypto.key.kms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.NamedRunnable.html" title="class in org.apache.hadoop.crypto.key.kms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/crypto/key/kms/ValueQueue.html" target="_top">Frames</a></li>
<li><a href="ValueQueue.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.crypto.key.kms</div>
<h2 title="Class ValueQueue" class="title">Class ValueQueue&lt;E&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.crypto.key.kms.ValueQueue&lt;E&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.48">ValueQueue</a>&lt;E&gt;
extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A Utility class that maintains a Queue of entries for a given key. It tries
 to ensure that there is are always at-least <code>numValues</code> entries
 available for the client to consume for a particular key.
 It also uses an underlying Cache to evict queues for keys that have not been
 accessed for a configurable period of time.
 Implementing classes are required to implement the
 <code>QueueRefiller</code> interface that exposes a method to refill the
 queue, when empty</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.NamedRunnable.html" title="class in org.apache.hadoop.crypto.key.kms">ValueQueue.NamedRunnable</a></strong></code>
<div class="block">A <code>Runnable</code> which takes a string name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="interface in org.apache.hadoop.crypto.key.kms">ValueQueue.QueueRefiller</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="type parameter in ValueQueue.QueueRefiller">E</a>&gt;</strong></code>
<div class="block">QueueRefiller interface a client must implement to use this class</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.SyncGenerationPolicy.html" title="enum in org.apache.hadoop.crypto.key.kms">ValueQueue.SyncGenerationPolicy</a></strong></code>
<div class="block">Policy to decide how many values to return to client when client asks for
 "n" values and Queue is empty.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.UniqueKeyBlockingQueue.html" title="class in org.apache.hadoop.crypto.key.kms">ValueQueue.UniqueKeyBlockingQueue</a></strong></code>
<div class="block">This backing blocking queue used in conjunction with the
 <code>ThreadPoolExecutor</code> used by the <code>ValueQueue</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#executor">executor</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#executorThreadsStarted">executorThreadsStarted</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.common.cache.LoadingCache&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">LinkedBlockingQueue</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#keyQueues">keyQueues</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private float</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#lowWatermark">lowWatermark</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#numValues">numValues</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.SyncGenerationPolicy.html" title="enum in org.apache.hadoop.crypto.key.kms">ValueQueue.SyncGenerationPolicy</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#policy">policy</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.UniqueKeyBlockingQueue.html" title="class in org.apache.hadoop.crypto.key.kms">ValueQueue.UniqueKeyBlockingQueue</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#queue">queue</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#REFILL_THREAD">REFILL_THREAD</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="interface in org.apache.hadoop.crypto.key.kms">ValueQueue.QueueRefiller</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#refiller">refiller</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#ValueQueue(int,%20float,%20long,%20int,%20org.apache.hadoop.crypto.key.kms.ValueQueue.QueueRefiller)">ValueQueue</a></strong>(int&nbsp;numValues,
                    float&nbsp;lowWaterMark,
                    long&nbsp;expiry,
                    int&nbsp;numFillerThreads,
                    <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="interface in org.apache.hadoop.crypto.key.kms">ValueQueue.QueueRefiller</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&nbsp;fetcher)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#ValueQueue(int,%20float,%20long,%20int,%20org.apache.hadoop.crypto.key.kms.ValueQueue.SyncGenerationPolicy,%20org.apache.hadoop.crypto.key.kms.ValueQueue.QueueRefiller)">ValueQueue</a></strong>(int&nbsp;numValues,
                    float&nbsp;lowWatermark,
                    long&nbsp;expiry,
                    int&nbsp;numFillerThreads,
                    <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.SyncGenerationPolicy.html" title="enum in org.apache.hadoop.crypto.key.kms">ValueQueue.SyncGenerationPolicy</a>&nbsp;policy,
                    <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="interface in org.apache.hadoop.crypto.key.kms">ValueQueue.QueueRefiller</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&nbsp;refiller)</code>
<div class="block">Constructor takes the following tunable configuration parameters</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#drain(java.lang.String)">drain</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName)</code>
<div class="block">Drains the Queue for the provided key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#getAtMost(java.lang.String,%20int)">getAtMost</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName,
                  int&nbsp;num)</code>
<div class="block">This removes the "num" values currently at the head of the Queue for the
 provided key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#getNext(java.lang.String)">getNext</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName)</code>
<div class="block">This removes the value currently at the head of the Queue for the
 provided key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#getSize(java.lang.String)">getSize</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName)</code>
<div class="block">Get size of the Queue for keyName</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#initializeQueuesForKeys(java.lang.String...)">initializeQueuesForKeys</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>...&nbsp;keyNames)</code>
<div class="block">Initializes the Value Queues for the provided keys by calling the
 fill Method with "numInitValues" values</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Cleanly shutdown</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html#submitRefillTask(java.lang.String,%20java.util.Queue)">submitRefillTask</a></strong>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName,
                                <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Queue.html?is-external=true" title="class or interface in java.util">Queue</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&nbsp;keyQueue)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="REFILL_THREAD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REFILL_THREAD</h4>
<pre>private static final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.66">REFILL_THREAD</a></pre>
</li>
</ul>
<a name="keyQueues">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keyQueues</h4>
<pre>private final&nbsp;com.google.common.cache.LoadingCache&lt;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">LinkedBlockingQueue</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&gt; <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.69">keyQueues</a></pre>
</li>
</ul>
<a name="executor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executor</h4>
<pre>private final&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a> <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.70">executor</a></pre>
</li>
</ul>
<a name="queue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queue</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.UniqueKeyBlockingQueue.html" title="class in org.apache.hadoop.crypto.key.kms">ValueQueue.UniqueKeyBlockingQueue</a> <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.71">queue</a></pre>
</li>
</ul>
<a name="refiller">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refiller</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="interface in org.apache.hadoop.crypto.key.kms">ValueQueue.QueueRefiller</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt; <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.72">refiller</a></pre>
</li>
</ul>
<a name="policy">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>policy</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.SyncGenerationPolicy.html" title="enum in org.apache.hadoop.crypto.key.kms">ValueQueue.SyncGenerationPolicy</a> <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.73">policy</a></pre>
</li>
</ul>
<a name="numValues">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numValues</h4>
<pre>private final&nbsp;int <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.75">numValues</a></pre>
</li>
</ul>
<a name="lowWatermark">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lowWatermark</h4>
<pre>private final&nbsp;float <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.76">lowWatermark</a></pre>
</li>
</ul>
<a name="executorThreadsStarted">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>executorThreadsStarted</h4>
<pre>private volatile&nbsp;boolean <a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.78">executorThreadsStarted</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ValueQueue(int, float, long, int, org.apache.hadoop.crypto.key.kms.ValueQueue.SyncGenerationPolicy, org.apache.hadoop.crypto.key.kms.ValueQueue.QueueRefiller)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ValueQueue</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.159">ValueQueue</a>(int&nbsp;numValues,
          float&nbsp;lowWatermark,
          long&nbsp;expiry,
          int&nbsp;numFillerThreads,
          <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.SyncGenerationPolicy.html" title="enum in org.apache.hadoop.crypto.key.kms">ValueQueue.SyncGenerationPolicy</a>&nbsp;policy,
          <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="interface in org.apache.hadoop.crypto.key.kms">ValueQueue.QueueRefiller</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&nbsp;refiller)</pre>
<div class="block">Constructor takes the following tunable configuration parameters</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>numValues</code> - The number of values cached in the Queue for a
    particular key.</dd><dd><code>lowWatermark</code> - The ratio of (number of current entries/numValues)
    below which the <code>fillQueueForKey()</code> funciton will be
    invoked to fill the Queue.</dd><dd><code>expiry</code> - Expiry time after which the Key and associated Queue are
    evicted from the cache.</dd><dd><code>numFillerThreads</code> - Number of threads to use for the filler thread</dd><dd><code>policy</code> - The SyncGenerationPolicy to use when client
    calls "getAtMost"</dd><dd><code>refiller</code> - implementation of the QueueRefiller</dd></dl>
</li>
</ul>
<a name="ValueQueue(int, float, long, int, org.apache.hadoop.crypto.key.kms.ValueQueue.QueueRefiller)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ValueQueue</h4>
<pre>public&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.194">ValueQueue</a>(int&nbsp;numValues,
          float&nbsp;lowWaterMark,
          long&nbsp;expiry,
          int&nbsp;numFillerThreads,
          <a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.QueueRefiller.html" title="interface in org.apache.hadoop.crypto.key.kms">ValueQueue.QueueRefiller</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&nbsp;fetcher)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initializeQueuesForKeys(java.lang.String...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeQueuesForKeys</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.206">initializeQueuesForKeys</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>...&nbsp;keyNames)
                             throws <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></pre>
<div class="block">Initializes the Value Queues for the provided keys by calling the
 fill Method with "numInitValues" values</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>keyNames</code> - Array of key Names</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></code></dd></dl>
</li>
</ul>
<a name="getNext(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNext</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.224">getNext</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName)
          throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                 <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></pre>
<div class="block">This removes the value currently at the head of the Queue for the
 provided key. Will immediately fire the Queue filler function if key
 does not exist.
 If Queue exists but all values are drained, It will ask the generator
 function to add 1 value to Queue and then drain it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>keyName</code> - String key name</dd>
<dt><span class="strong">Returns:</span></dt><dd>E the next value in the Queue</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></code></dd></dl>
</li>
</ul>
<a name="drain(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>drain</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.234">drain</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName)</pre>
<div class="block">Drains the Queue for the provided key.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>keyName</code> - the key to drain the Queue for</dd></dl>
</li>
</ul>
<a name="getSize(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.248">getSize</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName)
            throws <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></pre>
<div class="block">Get size of the Queue for keyName</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>keyName</code> - the key name</dd>
<dt><span class="strong">Returns:</span></dt><dd>int queue size</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></code></dd></dl>
</li>
</ul>
<a name="getAtMost(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAtMost</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.264">getAtMost</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName,
                int&nbsp;num)
                  throws <a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                         <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></pre>
<div class="block">This removes the "num" values currently at the head of the Queue for the
 provided key. Will immediately fire the Queue filler function if key
 does not exist
 How many values are actually returned is governed by the
 <code>SyncGenerationPolicy</code> specified by the user.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>keyName</code> - String key name</dd><dd><code>num</code> - Minimum number of values to return.</dd>
<dt><span class="strong">Returns:</span></dt><dd>List<E> values returned</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></code></dd></dl>
</li>
</ul>
<a name="submitRefillTask(java.lang.String, java.util.Queue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submitRefillTask</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.307">submitRefillTask</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;keyName,
                    <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Queue.html?is-external=true" title="class or interface in java.util">Queue</a>&lt;<a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.html" title="type parameter in ValueQueue">E</a>&gt;&nbsp;keyQueue)
                       throws <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../../src-html/org/apache/hadoop/crypto/key/kms/ValueQueue.html#line.346">shutdown</a>()</pre>
<div class="block">Cleanly shutdown</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ValueQueue.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/crypto/key/kms/LoadBalancingKMSClientProvider.WrapperException.html" title="class in org.apache.hadoop.crypto.key.kms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/crypto/key/kms/ValueQueue.NamedRunnable.html" title="class in org.apache.hadoop.crypto.key.kms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/crypto/key/kms/ValueQueue.html" target="_top">Frames</a></li>
<li><a href="ValueQueue.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
